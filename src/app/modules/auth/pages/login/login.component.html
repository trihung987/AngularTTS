<div class="login-page">
  <div class="bg-shapes">
    <div class="shape"></div>
    <div class="shape"></div>
    <div class="shape"></div>
  </div>

  <div class="login-container">
    <!-- Home Button -->
    <button type="button" class="home-button" (click)="navigateToHome()" aria-label="Go to home">
      <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
        <path d="m3 9 9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z"></path>
        <polyline points="9 22 9 12 15 12 15 22"></polyline>
      </svg>
      <span>Trang chủ</span>
    </button>

    <div class="logo-section">
      <div class="logo">✦</div>
      <h1 class="welcome-text">Welcome Back</h1>
      <p class="subtitle">Sign in to your account</p>
    </div>

    <form [formGroup]="loginForm" (ngSubmit)="onSubmit()" class="login-form">
      <div class="form-group">
        <label for="username">Username</label>
        <div
          class="input-wrapper"
          [class]="{ error: hasFieldError('username') }"
        >
          <input
            type="text"
            id="username"
            formControlName="username"
            placeholder="Enter your username"
            class="form-input"
            [class.loading]="isLoading()"
          />
          <div *ngIf="hasFieldError('username')" class="error-message">
            <svg
              viewBox="0 0 24 24"
              fill="none"
              stroke="currentColor"
              stroke-width="2"
            >
              <circle cx="12" cy="12" r="10"></circle>
              <line x1="12" y1="8" x2="12" y2="12"></line>
              <line x1="12" y1="16" x2="12.01" y2="16"></line>
            </svg>
            {{ getFieldError("username") }}
          </div>
        </div>
      </div>

      <div class="form-group">
        <label for="password">Password</label>
        <div
          class="input-wrapper"
          [class]="{ error: hasFieldError('password') }"
        >
          <input
            type="password"
            id="password"
            formControlName="password"
            placeholder="Enter your password"
            class="form-input"
            [class.loading]="isLoading()"
          />

          <div *ngIf="hasFieldError('password')" class="error-message">
            <svg
              viewBox="0 0 24 24"
              fill="none"
              stroke="currentColor"
              stroke-width="2"
            >
              <circle cx="12" cy="12" r="10"></circle>
              <line x1="12" y1="8" x2="12" y2="12"></line>
              <line x1="12" y1="16" x2="12.01" y2="16"></line>
            </svg>
            {{ getFieldError("password") }}
          </div>
        </div>
      </div>

      <div class="forgot-password">
        <a href="#" onclick="showForgotPassword()">Quên mật khẩu?</a>
      </div>

      <div class="error-response" id="errorResponse">
        {{ loginError }}
      </div>

      <button
        type="submit"
        class="login-button"
        id="loginBtn"
        [class.loading]="isLoading()"
      >
        <div class="btn-content">
          <div *ngIf="isLoading()" class="loading-spinner"></div>
          <span>{{ isLoading() ? "Đang đăng nhập..." : "Đăng nhập" }}</span>
        </div>
      </button>

      <!-- Register Link -->
      <div class="register-section">
        <p>
          Chưa có tài khoản?
          <a href="javascript:void(0)" (click)="navigateToRegister()" class="register-link">
            Đăng ký ngay
          </a>
        </p>
      </div>
    </form>
  </div>
</div>
