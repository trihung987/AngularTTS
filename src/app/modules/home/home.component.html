<section class="auto-banner" *ngIf="bannerEvents().length>0">
  <div class="banner-container">
    <div class="banner-content" *ngIf="!isBannerLoading()">
      <div
        class="banner-slide"
        *ngFor="let event of bannerEvents(); let i = index"
        [class.active]="i === currentBannerIndex"
        (click)="onBannerClick(event)"
      >
        <div class="banner-image">
          <img
            [src]="getImageUrl(event.eventBanner || event.eventImage)"
            alt="event.eventName"
            class="banner-img"
          />
          <div class="banner-overlay"></div>
        </div>
        <div class="banner-text">
          <div class="banner-category">{{ event.eventCategory }}</div>
          <h2 class="banner-title">{{ event.eventName }}</h2>
          <div class="banner-details">
            <span class="banner-date">{{ formatDate(event.startDate) }}</span>
            <span class="banner-location">{{ event.venue.province }}</span>
          </div>
          <button
            class="banner-cta"
            (click)="$event.stopPropagation(); onBookEvent(event)"
          >
            Đặt vé ngay
          </button>
        </div>
      </div>
    </div>

    <div class="banner-controls" *ngIf="bannerEvents">
      <button
        aria-label="banner prev"
        class="banner-nav prev"
        (click)="prevBanner()"
      >
        <svg fill="none" stroke="currentColor" viewBox="0 0 24 24">
          <path
            stroke-linecap="round"
            stroke-linejoin="round"
            stroke-width="2"
            d="M15 19l-7-7 7-7"
          />
        </svg>
      </button>
      <button
        aria-label="banner next"
        class="banner-nav next"
        (click)="nextBanner()"
      >
        <svg fill="none" stroke="currentColor" viewBox="0 0 24 24">
          <path
            stroke-linecap="round"
            stroke-linejoin="round"
            stroke-width="2"
            d="M9 5l7 7-7 7"
          />
        </svg>
      </button>
      <div class="banner-indicators">
        <button
          aria-label="banner"
          *ngFor="let event of bannerEvents(); let i = index"
          class="banner-indicator"
          [class.active]="i === currentBannerIndex"
          (click)="setBannerIndex(i)"
        ></button>
      </div>
    </div>

    <div class="banner-loading" *ngIf="isBannerLoading()">
      <p-skeleton height="100%" width="100%"></p-skeleton>
    </div>
  </div>
</section>

<section class="hero">
  <div class="container">
    <div class="hero-content">
      <h1 class="hero-title">
        Khám phá những sự kiện <span class="highlight">tuyệt vời</span>
      </h1>
      <p class="hero-description">
        Nền tảng đặt vé sự kiện hàng đầu Việt Nam. Tìm kiếm, đặt vé và tham gia
        những sự kiện đỉnh cao với trải nghiệm seamless từ A-Z.
      </p>

      <div class="search-container">
        <div class="search-box">
          <div class="search-input-container">
            <svg
              class="search-icon"
              fill="none"
              stroke="currentColor"
              viewBox="0 0 24 24"
            >
              <path
                stroke-linecap="round"
                stroke-linejoin="round"
                stroke-width="2"
                d="M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"
              />
            </svg>
            <input
              type="text"
              placeholder="Tìm kiếm sự kiện, địa điểm, chủ đề..."
              class="search-input"
              [(ngModel)]="searchQuery"
              (keypress)="onEnterSearch($event)"
            />
          </div>
          <button class="search-btn" (click)="onSearch()">Tìm kiếm</button>
        </div>
      </div>

      <div class="stats-grid">
        <div class="stat-card">
          <div class="stat-number blue">{{ featuredEvents.length }}+</div>
          <div class="stat-label">Sự kiện hoạt động</div>
        </div>
        <div class="stat-card">
          <div class="stat-number purple">50K+</div>
          <div class="stat-label">Người dùng tin tưởng</div>
        </div>
        <div class="stat-card">
          <div class="stat-number pink">99.9%</div>
          <div class="stat-label">Độ tin cậy hệ thống</div>
        </div>
      </div>
    </div>
  </div>
</section>

<section class="large-capacity-events" *ngIf="largeCapacityEvents.length > 0">
  <div class="container">
    <div class="section-header">
      <h2 class="section-title">Sự kiện quy mô lớn</h2>
      <p class="section-description">
        Những sự kiện với sức chứa khủng không thể bỏ lỡ
      </p>
    </div>

    <p-carousel
      [value]="largeCapacityEvents"
      [numVisible]="carouselNumVisible()"
      [numScroll]="1"
      [responsiveOptions]="carouselResponsiveOptions"
      [showIndicators]="true"
      [showNavigators]="true"
      [autoplayInterval]="4000"
      [circular]="true"
      class="custom-carousel"
    >
      <ng-template pTemplate="item" let-event>
        <div class="carousel-event-card" (click)="onBookEvent(event)">
          <div class="carousel-event-image">
            <img
              [src]="getImageUrl(event.eventImage)"
              alt="event.eventName"
              class="carousel-img"
            />
            <div class="carousel-event-category">{{ event.eventCategory }}</div>
            <div class="capacity-badge">
              <svg
                fill="none"
                stroke="currentColor"
                viewBox="0 0 24 24"
                class="capacity-icon"
              >
                <path
                  stroke-linecap="round"
                  stroke-linejoin="round"
                  stroke-width="2"
                  d="M17 20h5v-2a3 3 0 00-5.356-1.857M17 20H7m10 0v-2c0-.656-.126-1.283-.356-1.857M7 20H2v-2a3 3 0 015.356-1.857M7 20v-2c0-.656.126-1.283.356-1.857m0 0a5.002 5.002 0 019.288 0M15 7a3 3 0 11-6 0 3 3 0 016 0zm6 3a2 2 0 11-4 0 2 2 0 014 0zM7 10a2 2 0 11-4 0 2 2 0 014 0z"
                />
              </svg>
              {{ getTotalSeats(event) }} chỗ
            </div>
          </div>
          <div class="carousel-event-details">
            <h3 class="carousel-event-title">{{ event.eventName }}</h3>
            <div class="carousel-event-info">
              <div class="info-item">
                <svg
                  class="info-icon"
                  fill="none"
                  stroke="currentColor"
                  viewBox="0 0 24 24"
                >
                  <path
                    stroke-linecap="round"
                    stroke-linejoin="round"
                    stroke-width="2"
                    d="M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"
                  />
                </svg>
                <span>{{ formatDate(event.startDate) }}</span>
              </div>
              <div class="info-item">
                <svg
                  class="info-icon"
                  fill="none"
                  stroke="currentColor"
                  viewBox="0 0 24 24"
                >
                  <path
                    stroke-linecap="round"
                    stroke-linejoin="round"
                    stroke-width="2"
                    d="M17.657 16.657L13.414 20.9a1.998 1.998 0 01-2.827 0l-4.244-4.243a8 8 0 1111.314 0z"
                  />
                  <path
                    stroke-linecap="round"
                    stroke-linejoin="round"
                    stroke-width="2"
                    d="M15 11a3 3 0 11-6 0 3 3 0 016 0z"
                  />
                </svg>
                <span>{{ event.venue?.province }}</span>
              </div>
            </div>
            <div class="carousel-event-footer">
              <div class="event-capacity">
                Quy mô {{ getTotalSeats(event) }} người
              </div>
              <button class="btn-book" (click)="onBookEvent(event)">
                Đặt vé
              </button>
            </div>
          </div>
        </div>
      </ng-template>
    </p-carousel>
  </div>
</section>

<section class="featured-events">
  <div class="container">
    <div class="section-header">
      <h2 class="section-title">Sự kiện sắp diễn ra</h2>
      <p class="section-description">Những sự kiện hot không thể bỏ lỡ</p>
    </div>

    <div class="events-grid" *ngIf="isLoading()">
      <div class="event-card" *ngFor="let item of [1, 2, 3, 4, 5, 6]">
        <p-skeleton height="250px" width="100%"></p-skeleton>
        <div style="padding: 24px">
          <p-skeleton height="24px" width="80%" class="mb-2"></p-skeleton>
          <p-skeleton height="16px" width="60%" class="mb-2"></p-skeleton>
          <p-skeleton height="16px" width="70%" class="mb-2"></p-skeleton>
          <p-skeleton height="40px" width="100%"></p-skeleton>
        </div>
      </div>
    </div>

    <div class="events-grid" *ngIf="!isLoading() && featuredEvents.length > 0">
      <div
        class="event-card"
        *ngFor="let event of featuredEvents; trackBy: trackByEventId"
        (click)="onBookEvent(event)"
      >
        <div class="event-image">
          <img
            [src]="getImageUrl(event.eventImage)"
            alt="event.eventName"
            class="event-img"
          />
          <div class="event-category">{{ event.eventCategory }}</div>
        </div>
        <div class="event-details">
          <h3 class="event-title">{{ event.eventName }}</h3>
          <div class="event-info">
            <div class="info-item">
              <svg
                class="info-icon"
                fill="none"
                stroke="currentColor"
                viewBox="0 0 24 24"
              >
                <path
                  stroke-linecap="round"
                  stroke-linejoin="round"
                  stroke-width="2"
                  d="M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"
                />
              </svg>
              <span>{{ formatDate(event.startDate) }}</span>
            </div>
            <div class="info-item">
              <svg
                class="info-icon"
                fill="none"
                stroke="currentColor"
                viewBox="0 0 24 24"
              >
                <path
                  stroke-linecap="round"
                  stroke-linejoin="round"
                  stroke-width="2"
                  d="M17.657 16.657L13.414 20.9a1.998 1.998 0 01-2.827 0l-4.244-4.243a8 8 0 1111.314 0z"
                />
                <path
                  stroke-linecap="round"
                  stroke-linejoin="round"
                  stroke-width="2"
                  d="M15 11a3 3 0 11-6 0 3 3 0 016 0z"
                />
              </svg>
              <span>{{ event.venue.province }}</span>
            </div>
            <div class="info-item">
              <svg
                class="info-icon"
                fill="none"
                stroke="currentColor"
                viewBox="0 0 24 24"
              >
                <path
                  stroke-linecap="round"
                  stroke-linejoin="round"
                  stroke-width="2"
                  d="M17 20h5v-2a3 3 0 00-5.356-1.857M17 20H7m10 0v-2c0-.656-.126-1.283-.356-1.857M7 20H2v-2a3 3 0 015.356-1.857M7 20v-2c0-.656.126-1.283.356-1.857m0 0a5.002 5.002 0 019.288 0M15 7a3 3 0 11-6 0 3 3 0 016 0zm6 3a2 2 0 11-4 0 2 2 0 014 0zM7 10a2 2 0 11-4 0 2 2 0 014 0z"
                />
              </svg>
              <span>{{ getTotalSeats(event) }} chỗ ngồi</span>
            </div>
          </div>
          <div class="event-footer">
            <div
              class="event-price"
              *ngIf="event.zones && event.zones.length > 0"
            >
              {{ minPriceZone(event)}}
            </div>
            <button class="btn-book" (click)="onBookEvent(event)">
              Đặt vé
            </button>
          </div>
        </div>
      </div>
    </div>

    <div class="no-events" *ngIf="!isLoading() && featuredEvents.length === 0">
      <div class="no-events-content">
        <svg
          class="no-events-icon"
          fill="none"
          stroke="currentColor"
          viewBox="0 0 24 24"
        >
          <path
            stroke-linecap="round"
            stroke-linejoin="round"
            stroke-width="2"
            d="M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"
          />
        </svg>
        <h3>Không có sự kiện nào</h3>
        <p>Hiện tại chưa có sự kiện nổi bật nào. Vui lòng quay lại sau!</p>
      </div>
    </div>

    <div
      class="view-all-container"
      *ngIf="!isLoading() && featuredEvents.length > 0"
    >
      <button class="btn-view-all" (click)="onViewAllEvents()">
        Xem tất cả sự kiện
      </button>
    </div>
  </div>
</section>

<section class="features">
  <div class="container">
    <div class="section-header">
      <h2 class="section-title">Tại sao chọn EventHub?</h2>
      <p class="section-description">
        Trải nghiệm đặt vé hoàn hảo với công nghệ tiên tiến
      </p>
    </div>

    <div class="features-grid">
      <div class="feature-card" *ngFor="let feature of features">
        <div class="feature-icon" [ngSwitch]="feature.title">
          <svg
            *ngSwitchCase="'Thanh toán an toàn'"
            fill="currentColor"
            viewBox="0 0 24 24"
          >
            <path d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z" />
          </svg>
          <svg
            *ngSwitchCase="'Check-in QR Code'"
            fill="currentColor"
            viewBox="0 0 24 24"
          >
            <path
              d="M12 4.354a4 4 0 110 5.292M15 21H3v-1a6 6 0 0112 0v1zm0 0h6v-1a6 6 0 00-9-5.197m13.5-9a2.25 2.25 0 11-4.5 0 2.25 2.25 0 014.5 0z"
            />
          </svg>
          <svg
            *ngSwitchCase="'Real-time Updates'"
            fill="currentColor"
            viewBox="0 0 24 24"
          >
            <path d="M13 10V3L4 14h7v7l9-11h-7z" />
          </svg>
          <svg
            *ngSwitchCase="'Tìm kiếm thông minh'"
            fill="currentColor"
            viewBox="0 0 24 24"
          >
            <path
              d="M3 4a1 1 0 011-1h16a1 1 0 011 1v2.586a1 1 0 01-.293.707l-6.414 6.414a1 1 0 00-.293.707V17l-4 4v-6.586a1 1 0 00-.293-.707L3.293 7.293A1 1 0 013 6.586V4z"
            />
          </svg>
          <svg
            *ngSwitchCase="'Quản lý dễ dàng'"
            fill="currentColor"
            viewBox="0 0 24 24"
          >
            <path
              d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm-2 15l-5-5 1.41-1.41L10 14.17l7.59-7.59L19 8l-9 9z"
            />
          </svg>
          <svg
            *ngSwitchCase="'Hỗ trợ 24/7'"
            fill="currentColor"
            viewBox="0 0 24 24"
          >
            <path
              d="M16.5 3c-1.74 0-3.41.81-4.5 2.09C10.91 3.81 9.24 3 7.5 3 4.42 3 2 5.42 2 8.5c0 3.78 3.4 6.86 8.55 11.54L12 21.35l1.45-1.32C18.6 15.36 22 12.28 22 8.5 22 5.42 19.58 3 16.5 3z"
            />
          </svg>
        </div>
        <h3 class="feature-title">{{ feature.title }}</h3>
        <p class="feature-description">{{ feature.description }}</p>
      </div>
    </div>
  </div>
</section>

<section class="categories">
  <div class="container">
    <div class="section-header">
      <h2 class="section-title">Khám phá theo danh mục</h2>
      <p class="section-description">
        Tìm sự kiện phù hợp với sở thích của bạn
      </p>
    </div>

    <div class="categories-grid">
      <div
        class="category-card"
        *ngFor="let category of categories() | slice : 0 : 6; let i = index"
        [ngClass]="'category-' + i"
        (click)="onCategoryClick(category.name)"
      >
        <div class="category-icon">{{ getCategoryIcon(category.name) }}</div>
        <h3 class="category-name">{{ category.name }}</h3>
      </div>
    </div>
  </div>
  <p-scrolltop
    target="window"
    [threshold]="100"
    icon="pi pi-arrow-up"
    [buttonProps]="{ severity: 'contrast', raised: true, rounded: true }"
  />
</section>
