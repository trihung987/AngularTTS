<div class="create-event-container" [@fadeInUp]>
  <div class="event-header">
    <div class="header-content">
      <button class="back-button" (click)="saveAndExit(true)">
        <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
          <path d="M19 12H5M12 19l-7-7 7-7"/>
        </svg>
        <span>Về trang quản lý</span>
      </button>

      <div class="header-info">
        <h1 class="page-title">Tạo sự kiện mới</h1>
        <p class="page-subtitle">Hoàn thành từng bước để tạo sự kiện hoàn hảo</p>
      </div>

      <div class="header-actions">
        <button class="save-draft-btn" (click)="saveAndExit()">
          <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
            <path d="M19 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11l5 5v11a2 2 0 0 1-2 2z"/>
            <polyline points="17,21 17,13 7,13 7,21"/>
            <polyline points="7,3 7,8 15,8"/>
          </svg>
          Lưu nháp
        </button>
        <button
          class="publish-btn"
          [disabled]="isNotCompleted()"
          (click)="publishEvent()"
        >
          <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
            <path d="M12 19l7-7 3 3-7 7-3-3z"/>
            <path d="M18 13l-1.5-7.5L2 2l3.5 14.5L13 18l5-5z"/>
            <path d="M2 2l7.586 7.586"/>
            <circle cx="11" cy="11" r="2"/>
          </svg>
          Xuất bản
        </button>
      </div>
    </div>
  </div>

  <div class="progress-section">
    <div class="progress-bar">
      <div
        class="step-progress"
        [style.width.%]="progressPercentage"
        [@stepProgress]="{ value: progressPercentage, params: { width: progressPercentage } }"
      ></div>
    </div>
    <div class="progress-text">
      <span class="progress-current">Bước {{ currentStep }} / {{ totalSteps }}</span>
      <span class="progress-percent">{{ progressPercentage | number:'1.0-0' }}% hoàn thành</span>
    </div>
  </div>

  <div class="step-navigation">
    <div class="steps-container">
      <div
        *ngFor="let step of steps; let i = index"
        class="step-item"
        [class.active]="step.active"
        [class.completed]="step.completed"
        [class.disabled]="!canGoToStep(step.id)"
        (click)="goToStep(step.id)"
      >
        <div class="step-indicator">
          <div class="step-icon" *ngIf="!step.completed">
            <svg *ngIf="step.icon === 'info'" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
              <circle cx="12" cy="12" r="10"/>
              <line x1="12" y1="16" x2="12" y2="12"/>
              <line x1="12" y1="8" x2="12.01" y2="8"/>
            </svg>
            <svg *ngIf="step.icon === 'clock'" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
              <circle cx="12" cy="12" r="10"/>
              <polyline points="12,6 12,12 16,14"/>
            </svg>
            <svg *ngIf="step.icon === 'layout'" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
              <rect x="3" y="3" width="18" height="18" rx="2" ry="2"/>
              <line x1="9" y1="9" x2="15" y2="9"/>
              <line x1="9" y1="15" x2="15" y2="15"/>
            </svg>
            <svg *ngIf="step.icon === 'credit-card'" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
              <rect x="1" y="4" width="22" height="16" rx="2" ry="2"/>
              <line x1="1" y1="10" x2="23" y2="10"/>
            </svg>
          </div>
          <div class="step-check" *ngIf="step.completed">
            <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
              <polyline points="20,6 9,17 4,12"/>
            </svg>
          </div>
          <div class="step-number">{{ step.id }}</div>
        </div>

        <div class="step-content">
          <h3 class="step-title">{{ step.title }}</h3>
          <p class="step-subtitle">{{ step.subtitle }}</p>
        </div>

        <div class="step-connector" *ngIf="i < steps.length - 1">
          <div class="connector-line" [class.active]="step.completed"></div>
        </div>
      </div>
    </div>
  </div>

  <div class="step-content-area">
    <div class="content-card" [@slideIn]>
      <step1-info
        *ngIf="currentStep === 1"
        (stepComplete)="onStepComplete(1, $event)"
      ></step1-info>

      <step2-time
        *ngIf="currentStep === 2"
        (stepComplete)="onStepComplete(2, $event)"
      ></step2-time>

      <step3-zone
        *ngIf="currentStep === 3"
        (stepComplete)="onStepComplete(3, $event)"
      ></step3-zone>

      <step4-payment
        *ngIf="currentStep === 4"
        (stepComplete)="onStepComplete(4, $event)"
      ></step4-payment>


    </div>
  </div>

  <div class="navigation-controls">
    <div class="nav-buttons">
      <button
        class="nav-btn prev-btn"
        [disabled]="currentStep === 1"
        (click)="previousStep()"
      >
        <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
          <path d="M19 12H5M12 19l-7-7 7-7"/>
        </svg>
        Quay lại
      </button>

      <div class="step-indicator-dots">
        <div
          *ngFor="let step of steps"
          class="dot"
          [class.active]="step.active"
          [class.completed]="step.completed"
          (click)="goToStep(step.id)"
        ></div>
      </div>

      <button
        class="nav-btn next-btn"
        [disabled]="currentStep === totalSteps"
        (click)="nextStep()"
      >
        Tiếp theo
        <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
          <path d="M5 12h14M12 5l7 7-7 7"/>
        </svg>
      </button>
    </div>
  </div>
</div>
